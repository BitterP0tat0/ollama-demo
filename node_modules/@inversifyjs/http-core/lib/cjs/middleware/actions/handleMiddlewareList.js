"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.handleMiddlewareList = handleMiddlewareList;
const noop = () => undefined;
function handleMiddlewareList(orderedHandlers) {
    if (orderedHandlers.length === 1) {
        const [currentHandler] = orderedHandlers;
        return async (request, response) => {
            return currentHandler(request, response, noop);
        };
    }
    return async (request, response) => {
        let currentIndex = 0;
        let [currentHandler] = orderedHandlers;
        if (currentHandler === undefined) {
            throw new Error('No middleware handlers to process');
        }
        let nextCalled = false;
        const next = () => {
            nextCalled = true;
        };
        let result;
        do {
            result = await currentHandler(request, response, next);
            // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition
            if (!nextCalled) {
                break;
            }
            nextCalled = false;
            currentHandler = orderedHandlers[++currentIndex];
        } while (currentHandler !== undefined);
        return result;
    };
}
//# sourceMappingURL=handleMiddlewareList.js.map