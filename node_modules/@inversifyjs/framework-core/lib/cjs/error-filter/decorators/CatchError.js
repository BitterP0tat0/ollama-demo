"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.CatchError = CatchError;
const reflect_metadata_utils_1 = require("@inversifyjs/reflect-metadata-utils");
const inversify_1 = require("inversify");
const catchErrorMetadataReflectKey_1 = require("../../reflectMetadata/data/catchErrorMetadataReflectKey");
const buildCatchErrorMetadata_1 = require("../calculations/buildCatchErrorMetadata");
// eslint-disable-next-line @typescript-eslint/naming-convention
function CatchError(errorOrCatchErrorOptions) {
    return (target) => {
        let error = null;
        let scope = undefined;
        if (errorOrCatchErrorOptions !== undefined) {
            if (typeof errorOrCatchErrorOptions === 'object') {
                error = errorOrCatchErrorOptions.error ?? null;
                scope = errorOrCatchErrorOptions.scope;
            }
            else {
                error = errorOrCatchErrorOptions;
            }
        }
        (0, inversify_1.injectable)(scope)(target);
        (0, reflect_metadata_utils_1.updateOwnReflectMetadata)(target, catchErrorMetadataReflectKey_1.catchErrorMetadataReflectKey, reflect_metadata_utils_1.buildEmptySetMetadata, (0, buildCatchErrorMetadata_1.buildCatchErrorMetadata)(error));
    };
}
//# sourceMappingURL=CatchError.js.map