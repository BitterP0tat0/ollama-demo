"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.buildMiddlewareOptionsFromApplyMiddlewareOptions = buildMiddlewareOptionsFromApplyMiddlewareOptions;
const MiddlewarePhase_1 = require("../models/MiddlewarePhase");
const isApplyMiddlewareOptions_1 = require("../typeguard/isApplyMiddlewareOptions");
function buildMiddlewareOptionsFromApplyMiddlewareOptions(applyMiddlewareOptionsList) {
    const middlewareOptions = {
        postHandlerMiddlewareList: [],
        preHandlerMiddlewareList: [],
    };
    for (const applyMiddlewareOptions of applyMiddlewareOptionsList) {
        if ((0, isApplyMiddlewareOptions_1.isApplyMiddlewareOptions)(applyMiddlewareOptions)) {
            const middlewareList = applyMiddlewareOptions.phase === MiddlewarePhase_1.MiddlewarePhase.PostHandler
                ? middlewareOptions.postHandlerMiddlewareList
                : middlewareOptions.preHandlerMiddlewareList;
            if (Array.isArray(applyMiddlewareOptions.middleware)) {
                middlewareList.push(...applyMiddlewareOptions.middleware);
            }
            else {
                middlewareList.push(applyMiddlewareOptions.middleware);
            }
        }
        else {
            middlewareOptions.preHandlerMiddlewareList.push(applyMiddlewareOptions);
        }
    }
    return middlewareOptions;
}
//# sourceMappingURL=buildMiddlewareOptionsFromApplyMiddlewareOptions.js.map