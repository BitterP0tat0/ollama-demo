import{InversifyHttpAdapter as e,buildNormalizedPath as t}from"@inversifyjs/http-core";import s from"cookie-parser";import r from"express";const o=Symbol.for("@inversifyjs/http-express/InversifyExpressHttpAdapter");class p extends e{id=o;constructor(e,t,s){super(e,{logger:!0,useCookies:!1,useJson:!0,useText:!1,useUrlEncoded:!1},t,[],s)}_buildApp(e){return e??this._buildDefaultExpressApp()}_buildDefaultExpressApp(e){const t=e??r();return this.httpAdapterOptions.useCookies&&t.use(s()),this.httpAdapterOptions.useJson&&t.use(r.json({type:"application/json"})),this.httpAdapterOptions.useText&&t.use(r.text({type:"text/*"})),this.httpAdapterOptions.useUrlEncoded&&t.use(r.urlencoded({extended:!1,type:"application/x-www-form-urlencoded"})),t}_buildRouter(e){for(const s of e.routeParamsList){const r=[...s.preHandlerMiddlewareList,...s.guardList],o=s.postHandlerMiddlewareList,p=t(`${e.path}${s.path}`);this._app[s.requestMethodType](p,...r,s.handler,...o)}}_replyText(e,t,s){t.send(s)}_replyJson(e,t,s){t.json(s)}_replyStream(e,t,s){s.pipe(t)}_sendBodySeparator(e,t){t.flushHeaders()}_setStatus(e,t,s){t.status(s)}_setHeader(e,t,s,r){t.setHeader(s,r)}_getBody(e,t,s){return void 0===s?e.body:e.body[s]}_getParams(e,t){return void 0===t?e.params:e.params[t]}_getQuery(e,t){return void 0===t?e.query:e.query[t]}_getHeaders(e,t){return void 0===t?e.headers:e.headers[t]}_getCookies(e,t,s){return void 0===s?e.cookies:e.cookies[s]}}export{p as InversifyExpressHttpAdapter};
//# sourceMappingURL=index.js.map
